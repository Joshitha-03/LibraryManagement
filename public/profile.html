<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="userdashboard.css">
</head>
<body>
    <nav class="navbar">
        <div class="logo">
            <h2 id="welcomeUser">Welcome!</h2>
        </div>
        <ul>
            <li><a href="#" id="logoutBtn">Logout</a></li>
        </ul>
    </nav>
    <div class="Profile">
        <div class="pro">
           <h1>User Details:</h1>
        </div>
        
        <div class="details">
            <img id="UserProfileImage" src="/uploads/default.png" alt="Profile" width="150" height="150" style="border-radius: 50%;">
            <h3 id="UserName"></h3>
            <h3 id="UserId"></h3>
            <h3 id="UserEmail"></h3>
            <h3 id="UserPhone"></h3>
        </div>
   </div>
   <script>
    document
        .getElementById("logoutBtn")
        .addEventListener("click", async function (e) {
          e.preventDefault(); // prevent default anchor behavior

          try {
            const response = await fetch("/api/user/userLogout", {
              method: "POST",
              credentials: "include", // send cookies
            });

            const result = await response.json();
            if (response.ok) {
              alert(result.message); // "Logout successful"
              window.location.href = "index.html"; // redirect to login page
            } else {
              alert("Logout failed: " + result.message);
            }
          } catch (error) {
            console.error("Error during logout:", error);
            alert("An error occurred while logging out.");
          }
        });
   </script>
   <script src="userdash.js"></script>
   <script src="userDetails.js"></script>
</body>
</html>